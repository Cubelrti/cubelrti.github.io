(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{213:function(t,s,n){"use strict";n.r(s);var e=n(0),a=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"vue-implementation-03"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-implementation-03","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue Implementation 03")]),t._v(" "),n("h2",{attrs:{id:"vue-s-platform-related-decoration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-s-platform-related-decoration","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue's Platform Related Decoration")]),t._v(" "),n("p",[t._v("Now, we made clear about the constructor of "),n("code",[t._v("Vue")]),t._v(", which is "),n("code",[t._v("core/instance/index.js")]),t._v(" and "),n("code",[t._v("core/index.js")]),t._v(". The former one is the "),n("strong",[t._v("definition")]),t._v(" of the constructor of "),n("code",[t._v("Vue")]),t._v(". The latter one is to define "),n("strong",[t._v("global APIs")]),t._v(", which is static functions and properties to "),n("code",[t._v("Vue")]),t._v(". These two files have something in common: They are both located in "),n("code",[t._v("core")]),t._v(". We has descriped the directory when we introducing "),n("code",[t._v("Vue")]),t._v(". Files stored in "),n("code",[t._v("core")]),t._v(" is platform-unrelated code. Therefore, "),n("code",[t._v("core/instance/index.js")]),t._v(" and "),n("code",[t._v("core/index.js")]),t._v(" are both decorating core "),n("code",[t._v("Vue")]),t._v(" parts and they are both "),n("strong",[t._v("platform-unrelated")]),t._v(".")]),t._v(" "),n("p",[t._v("However, "),n("code",[t._v("Vue")]),t._v(" is a "),n("strong",[t._v("multi-platform")]),t._v(" project, and it can be ported into Web and Weex. Different platform has different components, directives and some platform-related functions. Thereform, "),n("code",[t._v("Vue")]),t._v(" has to be packaged targeting to different platforms. So what we are going to take a look at is "),n("code",[t._v("platforms/web/runtime/index.js")]),t._v(", which is our path to find "),n("strong",[t._v("Vue's construtor")]),t._v(".")]),t._v(" "),n("p",[t._v("Before we are taking dive into this file, we can open "),n("code",[t._v("platforms")]),t._v(" folder and we can see there are two sub-directories, which is "),n("code",[t._v("web")]),t._v(" and "),n("code",[t._v("weex")]),t._v(". These folders is to pack "),n("code",[t._v("Vue")]),t._v(" targeting to different platform. As for our concerning "),n("code",[t._v("web")]),t._v(" platform, it is included here as well.")]),t._v(" "),n("p",[t._v("Then, we open "),n("code",[t._v("platform/web/runtime/index.js")]),t._v(" and look at it. There are a lot "),n("code",[t._v("import")]),t._v(" at the beginning of this file, including importing "),n("code",[t._v("Vue")]),t._v(" from "),n("code",[t._v("core/index.js")]),t._v(".")]),t._v(" "),n("p",[t._v("Below "),n("code",[t._v("import")]),t._v(", there is a piece of code:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// install platform specific utils")]),t._v("\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mustUseProp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mustUseProp\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isReservedTag "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isReservedTag\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isReservedAttr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isReservedAttr\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getTagNamespace "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getTagNamespace\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isUnknownElement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isUnknownElement\n")])])]),n("p",[t._v("Do you remember "),n("code",[t._v("Vue.config")]),t._v("? What it proxying is the object exported by "),n("code",[t._v("core/config.js")]),t._v(". It first looks like this:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optionMergeStrategies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  silent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  productionTip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devtools"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  performance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  errorHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  warnHandler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ignoredElements"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  keyCodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isReservedTag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isReservedAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isUnknownElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  getTagNamespace"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" noop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parsePlatformTagName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" identity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mustUseProp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  _lifecycleHooks"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LIFECYCLE_HOOKS")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("We can see, properties of the "),n("code",[t._v("config")]),t._v(" object exported by "),n("code",[t._v("core/config.js")]),t._v(", are mostly defined as a initial value. And we can see many comments in "),n("code",[t._v("core/config.js")]),t._v(" as below:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Check if a tag is reserved so that it cannot be registered as a \n * component. This is platform-dependent and may be overritten.\n */")]),t._v("\nisReservedTag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Check if an attribute is reserved so that it cannot be used as a component\n * prop. This is platform-dependent and may be overritten.\n */")]),t._v("\nisReservedAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" no"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[n("strong",[t._v("This is platform-dependent and may be overritten.")]),t._v(" What it means is that this configuration is platform-dependent. And it is very likely to be overritten. Now, we can go back to this code:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// install platform specific utils")]),t._v("\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mustUseProp "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mustUseProp\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isReservedTag "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isReservedTag\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isReservedAttr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isReservedAttr\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getTagNamespace "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getTagNamespace\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isUnknownElement "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isUnknownElement\n")])])]),n("p",[t._v("Actually, it is overriding properties of "),n("code",[t._v("config")]),t._v(" exported by default. It is commented that it will install platform specific utils. As for their effect, we will discuss later.")]),t._v(" "),n("p",[t._v("And there are two lines of code:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// install platform runtime directives & components")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" platformDirectives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("components"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" platformComponents"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("They will install platform runtime directives and components. Do you remember how is "),n("code",[t._v("Vue.options")]),t._v(" look like? Before these lines executed, it is something like this:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n components"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  KeepAlive\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n filters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n _base"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vue\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("We have once met "),n("code",[t._v("extend")]),t._v(" function. In case you forget that, you can always refer to the appendix for "),n("code",[t._v("/shared/util.js")]),t._v(". So what will it look like after these lines? We need to know what is "),n("code",[t._v("platformDirectives")]),t._v(" and "),n("code",[t._v("platformComponents")]),t._v(".")]),t._v(" "),n("p",[t._v("According to "),n("code",[t._v("import")]),t._v(" at the beginning:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" platformDirectives "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./directives/index'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" platformComponents "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/index'")]),t._v("\n")])])]),n("p",[t._v("We know that these varible is imported from "),n("code",[t._v("runtime/directives/index.js")]),t._v(" and "),n("code",[t._v("runtime/components/index.js")]),t._v(". We open "),n("code",[t._v("runtime/directives/index.js")]),t._v(" and:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" model "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./model'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" show "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./show'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("That is to say that "),n("code",[t._v("platformDirectives")]),t._v(" is:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("platformDirectives "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("Therefore, after "),n("code",[t._v("extend")]),t._v(" is executed, "),n("code",[t._v("Vue.options")]),t._v(" become:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n components"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  KeepAlive\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n filters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n _base"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vue\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("code",[t._v("runtime/components/index.js")]),t._v(" is:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transition "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./transition'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TransitionGroup "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./transition-group'")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Transition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  TransitionGroup\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("So "),n("code",[t._v("platformComponents")]),t._v(" is:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("platformComponents "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Transition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  TransitionGroup\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("After "),n("code",[t._v("extend")]),t._v(", Vue.options become:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n components"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  KeepAlive"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Transition"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  TransitionGroup\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  show\n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n filters"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n _base"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vue\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("So we make clear about these code. It added specific components and directives targeting "),n("code",[t._v("web")]),t._v(" platform.")]),t._v(" "),n("p",[t._v("Let's get to the remaining code:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// install platform patch function")]),t._v("\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__patch__ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" inBrowser "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" patch "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" noop\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// public mount method")]),t._v("\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("$mount")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  el"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Element"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hydrating"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" boolean\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Component "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" inBrowser "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" undefined\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountComponent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hydrating"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("It added "),n("code",[t._v("__patch__")]),t._v(" to "),n("code",[t._v("Vue.prototype")]),t._v(". If you are running in a browser, it will be "),n("code",[t._v("patch")]),t._v(" function. Else, it will be a empty function "),n("code",[t._v("noop")]),t._v(". Then, it added "),n("code",[t._v("$mount")]),t._v(" function to "),n("code",[t._v("Vue.prototype")]),t._v(". We skip the "),n("code",[t._v("$mount")]),t._v(" and its effect.")]),t._v(" "),n("p",[t._v("Next, it is the global hook of "),n("code",[t._v("vue-devtools")]),t._v(". It is wrapped in "),n("code",[t._v("setTimeout")]),t._v(" and finally exports "),n("code",[t._v("Vue")]),t._v(".")]),t._v(" "),n("p",[t._v("So we have read "),n("code",[t._v("platforms/web/runtime/index.js")]),t._v(". Its effect is decorating "),n("code",[t._v("Vue")]),t._v(" targeting different platform:")]),t._v(" "),n("ul",[n("li",[t._v("It sets "),n("code",[t._v("Vue.config")]),t._v(" for platform")]),t._v(" "),n("li",[t._v("It mixed two "),n("code",[t._v("directives")]),t._v(": "),n("code",[t._v("model")]),t._v(" and "),n("code",[t._v("show")])]),t._v(" "),n("li",[t._v("It mixed two "),n("code",[t._v("components")]),t._v(": "),n("code",[t._v("Transition")]),t._v(" and "),n("code",[t._v("TransitionGroup")])]),t._v(" "),n("li",[t._v("It added two functions to "),n("code",[t._v("Vue.prototype")]),t._v(": "),n("code",[t._v("__patch__")]),t._v(" and "),n("code",[t._v("$mount")])])]),t._v(" "),n("p",[t._v("After this file excuted, "),n("code",[t._v("Vue.options")]),t._v(", "),n("code",[t._v("Vue.config")]),t._v(" and "),n("code",[t._v("Vue.prototype")]),t._v(" are changed. We can refer these changes in appendix.")])])}],!1,null,null,null);s.default=a.exports}}]);